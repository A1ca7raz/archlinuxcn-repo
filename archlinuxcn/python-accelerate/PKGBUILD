# Maintainer: jzbor <zborof at posteo dot de>
pkgname=python-accelerate
_name=${pkgname#python-}
pkgver=0.29.1
pkgrel=1
pkgdesc="Train and use PyTorch models with multi-GPU, TPU, mixed-precision"
arch=(any)
url="https://github.com/huggingface/$_name"
license=('MIT')
groups=()
depends=(python)
makedepends=(python-build python-installer python-wheel python-setuptools)
# checkdepends=(
#   "python-pytest"
#   "python-datasets"
#   "python-evaluate"
#   "python-transformers"
#   "python-scipy"
#   "python-scikit-learn"
#   "python-deepspeed"
#   "python-tqdm"
# )
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
source=("$pkgname-$pkgver.tar.gz::$url/archive/refs/tags/v$pkgver.tar.gz")
noextract=()
sha512sums=('14ebd8b4d3e6c01f85cdc45cef3c730aa44d3edb28b9bc5dd2a36ededc29f6363687aa85bcb2764df9c18158834a6358bcb3fc65afad589e8c8c0469fcfd944f')
validpgpkeys=()

build() {
    cd "$_name-$pkgver"
    python -m build --wheel --no-isolation
}

package() {
    cd "$_name-$pkgver"
    python -m installer --destdir="$pkgdir" dist/*.whl
}

# check() {
#     cd "$_name-$pkgver"
#     pytest tests
# }
