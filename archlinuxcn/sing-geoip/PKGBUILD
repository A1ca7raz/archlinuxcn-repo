# Maintainer: everyx <lunt.luo#gmail.com>

pkgbase=sing-geoip
pkgname=(sing-geoip-rule-set sing-geoip-db)
pkgver=20240312
pkgrel=1
pkgdesc="GeoIP Database and Rule Set for sing-box"
arch=(any)
url="https://github.com/SagerNet/$pkgbase"
license=(CC-BY-SA-4.0 GPL-3.0-or-later)

source=("rule-set.zip::$url/archive/refs/heads/rule-set.zip"
		"geoip.db::$url/releases/download/$pkgver/geoip.db")
sha256sums=('00a20298a06bb87357c40a76852b2f5442f0dff10dfb240af8035e98a073279f'
            '77879a4239ed28a9835e7db1d7f55dd3f9540904714125cb39cc3425e61b7fd4')

package_sing-geoip-rule-set() {
	pkgdesc="sing-geoip (rule-set)"
	provides=($pkgbase)

	install -dm755 "$pkgdir/usr/share/sing-box/rule-set"
	install -Dm644 sing-geoip-rule-set/*.srs "$pkgdir/usr/share/sing-box/rule-set"
}

package_sing-geoip-db() {
	pkgdesc="sing-geoip (database)"
	provides=($pkgbase)

	install -dm755 "$pkgdir/usr/share/sing-box"
	install -Dm644 geoip.db "$pkgdir/usr/share/sing-box"
}
