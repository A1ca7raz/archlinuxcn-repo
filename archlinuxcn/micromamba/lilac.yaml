maintainers:
  - github: yuyichao

pre_build_script: update_pkgver_and_pkgrel(_G.newver.lstrip('micromamba-'))
post_build: git_pkgbuild_commit

repo_depends:
  - repro
  - termcolor

update_on:
  - source: github
    github: mamba-org/mamba
    use_latest_tag: true
    include_regex: 'micromamba-\d+\.\d+\.\d+'
  - source: alpm
    alpm: libarchive
    provided: libarchive.so
  - source: alpm
    alpm: curl
    provided: libcurl.so
  - source: alpmfiles
    alpm: libsolv
    strip_dir: true
    filename: 'libsolv.so.\d+'
  - source: alpmfiles
    alpm: libsolv
    strip_dir: true
    filename: 'libsolvext.so.\d+'
  - source: alpm
    alpm: spdlog
    provided: libspdlog.so
  - source: alpm
    alpm: yaml-cpp
    provided: libyaml-cpp.so
  - alias: alpm-lilac
    alpm: reproc
    provided: libreproc.so
  - alias: alpm-lilac
    alpm: reproc
    provided: libreproc++.so
  - alias: python
  - source: manual
    manual: 1
